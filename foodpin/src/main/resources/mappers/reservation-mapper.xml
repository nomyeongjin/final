<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.project.foodpin.reservation.model.mapper.ReservationMapper">

	<select id="storeDetail" resultType="store">
		SELECT STORE_NO, STORE_NAME, STORE_INFO, STORE_LOCATION, STORE_STATUS, STORE_MAX_NUMBER, STORE_TEL, OPEN_HOUR, CLOSE_HOUR,
				BREAKTIME_START, BREAKTIME_END, STORE_CLOSED, STORE_IMG, TOTAL_RATING, MEMBER_NO, STORE_MAX_TABLE
		FROM "STORE"
		WHERE STORE_NO=#{storeNo}
		AND STORE_CLOSED = 'N'
	</select>
	
	<!-- <select id="selectStoreNo">
		SELECT STORE_NO 
		FROM "STORE"
		WHERE STORE_NAME =#{storeName}
	</select> -->

	<!-- 이용시간 조회 -->
	<select id="selectUseTime">
		SELECT OPEN_HOUR , CLOSE_HOUR, BREAKTIME_START , BREAKTIME_END
		FROM "STORE"
		WHERE STORE_NO = #{storeNo}
		AND STORE_CLOSED = 'N'
	</select>
	
	<!-- 예약 저장 -->
	<insert id="insertReservation">
		INSERT INTO "RESERVATION" VALUES(
			SEQ_RESERV_NO.NEXTVAL,
			TO_DATE(#{reservDate}, 'YYYY-MM-DD'),
			#{reservTime},
			#{reservCount}, 
			DEFAULT,
			#{reservRequest},
			#{memberNo},
			#{storeNo},
			#{visitName},
			#{visitTel}
	)
	</insert>
	
</mapper>